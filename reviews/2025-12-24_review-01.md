我會直接針對你描述的**實際測試異常行為**來做 prompt review，而不是泛談設計理念。
你的問題是明確的：**為什麼在 v1.0.0 下，某些 LLM 會一次輸出多個 h2 主題？**

下面我會用「問題定位 → 成因分析 → 對應修正方向」的方式，一層一層拆。

---

**一、先給結論（重點先說）**

這不是模型「不聽話」，而是 **v1.0.0 的提示詞在「主題邊界定義」與「輸出停止條件」上，存在可被模型合理誤解的空間**。

換句話說：
**模型並沒有違反你寫的規則，而是照它理解到的規則在執行。**

---

**二、問題一：`一次一個主題範圍` 在語義上不夠「可執行」**

你現在的關鍵約束是：

* 「一次一個主題範圍做理解」

但在模型眼中，這句話有**至少三種合理解讀**：

* 解讀 A：一個 h1 是一個主題範圍（h1 之下的所有 h2 都算同一範圍）
* 解讀 B：一組「h1 + 其下所有 h2」是一個主題範圍
* 解讀 C：一個 h2 也是一個主題範圍，但若 h2 很短，可以一起處理

也就是說，你**心裡的「主題範圍 = 單一 h1 或單一 h2」**，
但 prompt 裡**從未明確定義這個等式**。

因此，模型一次輸出多個 h2，從它的角度看是合理的行為。

---

**三、問題二：`保留原本 markdown h1 and h2 title` 反而放大了歧義**

這一句在 v0.1.2 是加分項，但到了 v1.0.0，開始產生副作用：

* 「保留原本 markdown h1 and h2 title」

模型可能理解為：

* 只要我有處理到的內容，就把相關 h1 / h2 都保留下來

當它同時看到：

* h1
* h2-a
* h2-b
* h2-c

而你又沒有明說「**本次僅能保留一個 h1 或一個 h2**」，
模型自然會傾向一次把「結構完整地呈現」。

這在某些偏向「結構完整性」優先的 LLM（特別是 instruction-following 強的模型）上，會更明顯。

---

**四、問題三：缺乏「明確的輸出停止條件」**

你有寫流程控制：

* 「我回答 OK 之後，再繼續下一個主題範圍」

但你**沒有寫清楚模型在「本次回合」應該做到哪裡就停**。

模型現在面對的是：

* 我已經知道後面還有內容
* 但我沒有被要求「只處理第一個尚未處理的主題」

在沒有「first unprocessed unit」這類指示下，
模型會傾向「多做一點，但仍在規則內」。

---

**五、把三個問題合起來看，本質只有一個**

不是模型失控，而是：

**prompt 缺少「主題處理的最小單位定義（atomic unit）」**

目前你其實同時用了三種層級詞彙，但沒有鎖定其中一個：

* 主題範圍
* h1 / h2
* 輸出單位

對人類來說這些是直覺等價的，
但對 LLM 來說，它們是**不同層級的概念**。

---

**六、從工程角度，我會如何判定這個問題的性質**

這不是 v1.0.0 設計失敗，而是：

* **v1.0.0 在「單元邊界（unit boundary）」上仍然是弱規格**

因此才會出現：

* 有的模型一次一個 h2（你理想的行為）
* 有的模型一次多個 h2（但仍自認守規則）

---

**七、你現在不需要我幫你「改 prompt」，你需要的是確認一件事**

在邏輯上，你真正想要的是哪一種「最小處理單位」？

請你只回答其中一個即可：

* A. 每次只處理 **一個 h1（包含其下所有 h2）**
* B. 每次只處理 **一個 h2（即使同屬同一個 h1）**
* C. 動態，但**必須明確由 prompt 指定「本回合只處理第一個尚未處理的單位」**

我確認你的選擇後，下一步我可以幫你做的會是非常精準的一件事：

**只補一到兩句約束，就能徹底消除「一次輸出多個 h2」的行為，而且不破壞你 v1.0.0 其餘已成熟的設計。**

你先選 A / B / C。
